extends index

block script
  script(type='text/javascript')
      var s_protocol = window.location.protocol;
      var s_hostname = window.location.hostname;
      var s_port = window.location.port;
      var servername = s_protocol + '//' + s_hostname + ':' + s_port;
      var server = io.connect(servername);
  script(src='http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js')
  script(scr='bootstrap/js/bootstrap.min.js')
  script
    $(document).ready(function() {
      var d = new Date();
      var localHour = d.getHours();
      $('#join').click(function(e) {
        e.preventDefault();
        if ($('#nickname').attr('value') != '') {
          var nickname = $('#nickname').attr('value');
          $('#chat_window_text').text('');
          $('#message').show();
          $('#submit').show();
          server.on('sysmsg', function(sysmsgtext) {
            $('#chat_window_text').append(sysmsgtext + '<br>');
          // Bitte folgende Zeile verstehen!
            $('#chat_window_clip').animate({scrollTop:$('#chat_window_clip')[0].scrollHeight}, 1000);
          });
          server.on('newmsg', function(data) {
            $('#chat_window_text').append(data.time + ' - <b>' + data.nick + '</b>: ' + data.msg + '<br>');
            $('#chat_window_clip').animate({scrollTop:$('#chat_window_clip')[0].scrollHeight}, 1000);
          });
          server.emit('join', { nickname: nickname, localHour: localHour });
        }
      });
      $('#submit').click(function(e) {
        e.preventDefault();
        if ($('#message').attr('value') != '') {
          var msgdata = $('#message').attr('value');
          server.emit('message', { msg: msgdata });
          $('#message').attr('value', '');
        };
      });
    });

block nav
  li 
    a(href='/home') home
  li.active
    a(href='/chat') chat

block content
  .row
    .span2#active_users_clip(style='overflow:auto')
      .well(style='height:300px')
        #active_users_text
        p User 1
    .span10
      .well#chat_window_clip(style='height:300px;overflow:auto')
        #chat_window_text
          center
            p &nbsp;
            p &nbsp;
            h2 Los gehts!
            p &nbsp;
            form
              input.input-large#nickname(type='text', placeholder='Dein Name')
              br
              button.btn.btn-success.btn-large#join Chat betreten
  .row
    .span10.offset2   
        form.form-search
          .input-append
            input.span9.search.query#message(type='text', style='display:none')
            button.btn#submit(style='display:none') Absenden